(()=>{var e={};e.id=282,e.ids=[282],e.modules={3524:e=>{"use strict";e.exports=require("@prisma/client")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5315:e=>{"use strict";e.exports=require("path")},7360:e=>{"use strict";e.exports=require("url")},3045:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>l,routeModule:()=>f,tree:()=>c}),a(6443),a(9707),a(1884),a(996);var r=a(170),s=a(5002),n=a(3876),o=a.n(n),d=a(6299),i={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(i[e]=()=>d[e]);a.d(t,i);let c=["",{children:["expense",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,6443)),"/Users/gustistudio/Dev/gdps/gdps-c3/src/app/expense/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,9707)),"/Users/gustistudio/Dev/gdps/gdps-c3/src/app/layout.tsx"],loading:[()=>Promise.resolve().then(a.bind(a,1884)),"/Users/gustistudio/Dev/gdps/gdps-c3/src/app/loading.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,996,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,3881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/gustistudio/Dev/gdps/gdps-c3/src/app/expense/page.tsx"],u="/expense/page",p={require:a,loadChunk:()=>Promise.resolve()},f=new r.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/expense/page",pathname:"/expense",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},2269:(e,t,a)=>{let r={"14e638d4f2eec218191f2e6daa7aaefc4c0b9c1d":()=>Promise.resolve().then(a.bind(a,8345)).then(e=>e.saveTransaction),"0431a4d6a84f4b0833413134e7b5e99d8cfe98af":()=>Promise.resolve().then(a.bind(a,8160)).then(e=>e.getAccountsByType),"1b6a5d3934751f3ef38296780b832e01bb73aaca":()=>Promise.resolve().then(a.bind(a,8160)).then(e=>e.getAccounts),fa692584667d96a1d17084567834ac9b49e84083:()=>Promise.resolve().then(a.bind(a,8160)).then(e=>e.getAccountsByGroup2)};async function s(e,...t){return(await r[e]()).apply(null,t)}e.exports={"14e638d4f2eec218191f2e6daa7aaefc4c0b9c1d":s.bind(null,"14e638d4f2eec218191f2e6daa7aaefc4c0b9c1d"),"0431a4d6a84f4b0833413134e7b5e99d8cfe98af":s.bind(null,"0431a4d6a84f4b0833413134e7b5e99d8cfe98af"),"1b6a5d3934751f3ef38296780b832e01bb73aaca":s.bind(null,"1b6a5d3934751f3ef38296780b832e01bb73aaca"),fa692584667d96a1d17084567834ac9b49e84083:s.bind(null,"fa692584667d96a1d17084567834ac9b49e84083")}},6576:(e,t,a)=>{Promise.resolve().then(a.bind(a,6050)),Promise.resolve().then(a.bind(a,3294))},7217:(e,t,a)=>{"use strict";a.d(t,{Ok:()=>o,T8:()=>n,xe:()=>s}),a(689);var r=a(1294),s=(0,r.$)("0431a4d6a84f4b0833413134e7b5e99d8cfe98af"),n=(0,r.$)("1b6a5d3934751f3ef38296780b832e01bb73aaca"),o=(0,r.$)("fa692584667d96a1d17084567834ac9b49e84083")},6050:(e,t,a)=>{"use strict";a.d(t,{default:()=>l});var r=a(7247),s=a(8964),n=a(9835);a(689);var o=(0,a(1294).$)("14e638d4f2eec218191f2e6daa7aaefc4c0b9c1d"),d=a(7217),i=a(5492);let c={date:new Date().toISOString().split("T")[0],description:"",ref:"",mediaPath:"",debit:0,credit:0,accountId:0},l=({accountId:e})=>{let[t,a]=(0,s.useState)([]),{toast:l}=(0,n.pm)();(0,s.useEffect)(()=>{(async()=>{try{let e=await (0,d.xe)(5);a(e)}catch(e){console.error("Failed to fetch accounts:",e)}})()},[]);let[u,p]=(0,s.useState)({date:new Date().toISOString().split("T")[0],description:"",ref:"",accountId:e}),[f,m]=(0,s.useState)([{description:"",ref:"",mediaPath:"",debit:0,credit:0,accountId:0}]),[x,g]=(0,s.useState)(0),h=f.length>1,[b]=(0,s.useState)(f.map(()=>"")),v=async e=>{e.preventDefault();let t=new FormData(e.currentTarget);t.append("transactions",JSON.stringify(f));try{console.log("accountId: ( from mainData )",u.accountId),await o(t,u.accountId),w(),l({title:"Success",description:"Transaction saved successfully",duration:3e3})}catch(e){console.error("Error saving transaction:",e),l({title:"Error",description:"Failed to save transaction",variant:"destructive",duration:3e3})}},y=e=>{p({...u,[e.target.name]:e.target.value})},j=(e,t)=>{let{name:a,value:r}=t.target,s=f.map((t,s)=>s===e?{...t,[a]:r}:t);m(s),g(s.reduce((e,t)=>e+t.credit,0))},w=()=>{m([{...c}]),p({date:new Date().toISOString().split("T")[0],description:"",ref:"",accountId:e}),g(0)};return r.jsx(r.Fragment,{children:(0,r.jsxs)("div",{className:"bg-gray-100 shadow-md rounded-lg p-3 space-y-4 w-full",children:[r.jsx("p",{className:"text-md text-bold mt-1",children:"Catatan Transaksi:"}),(0,r.jsxs)("form",{onSubmit:v,children:[(0,r.jsxs)("div",{className:"bg-gray-100 rounded-lg space-y-2",children:[(0,r.jsxs)("select",{required:!0,name:"accountId",className:"border p-2 rounded w-full",value:u.accountId,onChange:y,children:[r.jsx("option",{value:"",children:"Akun"}),t.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.code," - ",e.name]},e.id))]}),(0,r.jsxs)("div",{className:"flex justify-between gap-2",children:[r.jsx("input",{required:!0,type:"date",name:"date",value:u.date,onChange:y,className:"w-[100%] p-2 rounded"}),r.jsx("input",{type:"text",name:"ref",value:u.ref,onChange:y,placeholder:"Nomor Referensi",className:"w-[100%] p-2 rounded"})]}),r.jsx("input",{type:"text",name:"description",value:u.description,onChange:y,placeholder:"Uraian transaksi",className:"w-[100%] p-2 rounded"})]}),r.jsx("h4",{className:"text-md mt-4",children:"Detail Transaksi:"}),r.jsx(i.Z,{}),r.jsx("div",{className:"rounded-lg space-y-1",children:f.map((e,a)=>(0,r.jsxs)("div",{className:"flex justify-between gap-2",children:[r.jsx("div",{children:(0,r.jsxs)("select",{value:e.accountId,name:"accountId",onChange:e=>j(a,e),required:!0,className:"border p-2 rounded w-[100%] md:w-[100%] h-[40px]",children:[r.jsx("option",{value:"",children:"Akun"}),t.map(e=>(0,r.jsxs)("option",{value:e.id,children:[e.code," - ",e.name]},e.id))]})}),r.jsx("input",{required:!0,type:"text",name:"description",value:e.description,onChange:e=>j(a,e),placeholder:"Uraian",className:"w-[100%] md:w-[100%] p-2 rounded"}),r.jsx("input",{required:!0,type:"number",name:"credit",value:e.credit||"",onChange:e=>j(a,e),placeholder:"Jumlah",className:"w-[100%] md:w-[100%] p-2 rounded"})]},a))}),(0,r.jsxs)("div",{className:"flex flex-col gap-4 mt-4 mb-2",children:[(0,r.jsxs)("div",{className:"flex flex-row gap-2",children:[r.jsx("button",{className:"bg-blue-500 text-white p-2 px-4 rounded-md",type:"button",onClick:()=>{m([...f,{description:"",ref:"",mediaPath:"",debit:0,credit:0,accountId:0}])},children:"Tambah transaksi"}),r.jsx("button",{className:"bg-blue-500 text-white p-2 px-4 rounded-md",type:"submit",children:"SIMPAN"}),r.jsx("button",{className:`text-white p-2 px-4 rounded-md ${h?"bg-blue-500":"bg-gray-400 cursor-not-allowed"}`,type:"button",onClick:w,disabled:!h,children:"Reset"})]}),r.jsx("div",{children:r.jsx("div",{children:(0,r.jsxs)("p",{children:["Total Pengeluaran: ",x]})})})]})]})]})})}},5492:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(7247);a(8964);let s=function(){return r.jsx("div",{className:"border-b border-foreground my-2"})}},3294:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>h});var r=a(7247),s=a(9835),n=a(8964),o=a(2095),d=a(4710),i=a(1608),c=a(677);let l=d.zt,u=n.forwardRef(({className:e,...t},a)=>r.jsx(d.l_,{ref:a,className:(0,c.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));u.displayName=d.l_.displayName;let p=(0,i.j)("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=n.forwardRef(({className:e,variant:t,...a},s)=>r.jsx(d.fC,{ref:s,className:(0,c.cn)(p({variant:t}),e),...a}));f.displayName=d.fC.displayName,n.forwardRef(({className:e,...t},a)=>r.jsx(d.aU,{ref:a,className:(0,c.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium transition-colors hover:bg-secondary focus:outline-none focus:ring-1 focus:ring-ring disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t})).displayName=d.aU.displayName;let m=n.forwardRef(({className:e,...t},a)=>r.jsx(d.x8,{ref:a,className:(0,c.cn)("absolute right-1 top-1 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:r.jsx(o.Pxu,{className:"h-4 w-4"})}));m.displayName=d.x8.displayName;let x=n.forwardRef(({className:e,...t},a)=>r.jsx(d.Dx,{ref:a,className:(0,c.cn)("text-sm font-semibold [&+div]:text-xs",e),...t}));x.displayName=d.Dx.displayName;let g=n.forwardRef(({className:e,...t},a)=>r.jsx(d.dk,{ref:a,className:(0,c.cn)("text-sm opacity-90",e),...t}));function h(){let{toasts:e}=(0,s.pm)();return(0,r.jsxs)(l,{children:[e.map(function({id:e,title:t,description:a,action:s,...n}){return(0,r.jsxs)(f,{...n,children:[(0,r.jsxs)("div",{className:"grid gap-1",children:[t&&r.jsx(x,{children:t}),a&&r.jsx(g,{children:a})]}),s,r.jsx(m,{})]},e)}),r.jsx(u,{})]})}g.displayName=d.dk.displayName},9835:(e,t,a)=>{"use strict";a.d(t,{Am:()=>u,pm:()=>p});var r=a(8964);let s=0,n=new Map,o=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),l({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},d=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?o(a):e.toasts.forEach(e=>{o(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],c={toasts:[]};function l(e){c=d(c,e),i.forEach(e=>{e(c)})}function u({...e}){let t=(s=(s+1)%Number.MAX_SAFE_INTEGER).toString(),a=()=>l({type:"DISMISS_TOAST",toastId:t});return l({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||a()}}}),{id:t,dismiss:a,update:e=>l({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function p(){let[e,t]=r.useState(c);return r.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>l({type:"DISMISS_TOAST",toastId:e})}}},8160:(e,t,a)=>{"use strict";let r;a.r(t),a.d(t,{getAccounts:()=>n,getAccountsByGroup2:()=>o,getAccountsByType:()=>d});var s=a(8713);async function n(){try{return await r.account.findMany({select:{id:!0,code:!0,name:!0},orderBy:{code:"asc"}})}catch(e){throw console.error("Failed to fetch accounts:",e),Error("Failed to fetch accounts")}}async function o(e){try{return await r.account.findMany({select:{id:!0,code:!0,name:!0},orderBy:{code:"asc"},where:{accountGroup2Id:e}})}catch(e){throw console.error("Failed to fetch accounts:",e),Error("Failed to fetch accounts")}}async function d(e){try{return await r.account.findMany({select:{id:!0,code:!0,name:!0},orderBy:{code:"asc"},where:{accountTypeId:e}})}catch(e){throw console.error("Failed to fetch accounts:",e),Error("Failed to fetch accounts")}}a(9640),r=new(a(3524)).PrismaClient,(0,a(3557).h)([n,o,d]),(0,s.j)("1b6a5d3934751f3ef38296780b832e01bb73aaca",n),(0,s.j)("fa692584667d96a1d17084567834ac9b49e84083",o),(0,s.j)("0431a4d6a84f4b0833413134e7b5e99d8cfe98af",d)},8345:(e,t,a)=>{"use strict";a.r(t),a.d(t,{saveTransaction:()=>d});var r=a(8713);a(9640);var s=a(3524),n=a(3557);let o=new s.PrismaClient;async function d(e,t){let a=JSON.parse(e.get("transactions")||"[]"),r={date:e.get("date"),description:e.get("description"),ref:e.get("ref"),accountId:parseInt(t)};console.log("action-main TANGGAL",r.date);try{let e=await o.$transaction(async e=>{let{totalDebit:t,totalCredit:s}=a.reduce((e,t)=>({totalDebit:e.totalDebit+(parseFloat(t.debit)||0),totalCredit:e.totalCredit+(parseFloat(t.credit)||0)}),{totalDebit:0,totalCredit:0}),n=await e.transactionAll.create({data:{date:new Date(r.date),description:r.description,ref:r.ref,accountId:r.accountId,debit:s,credit:t}}),o=await e.transactionAll.createMany({data:a.map(e=>({date:new Date(r.date),description:e.description,ref:e.ref||"",mediaPath:e.mediaPath||"",debit:parseFloat(e.debit)||0,credit:parseFloat(e.credit)||0,accountId:parseInt(e.accountId)}))});return console.log("action- Saved detailed ALL transactions:",o),console.log("action-Saved main ALL transaction:",n),{savedAllTransactions:o,mainAllTransaction:n}});return{success:!0,data:e}}catch(e){return console.error("Error creating transactions:",e),{success:!1,error:"Error creating transactions"}}}(0,n.h)([d]),(0,r.j)("14e638d4f2eec218191f2e6daa7aaefc4c0b9c1d",d)},6443:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var r=a(2051);a(6269);let s=(0,a(5347).createProxy)(String.raw`/Users/gustistudio/Dev/gdps/gdps-c3/src/app/expense/OtherForm.tsx#default`);var n=a(1466),o=a(7326),d=a.n(o),i=a(2386);let c=function(){let e=r.jsx("h4",{children:d().pageInfo.headerText}),t=r.jsx("h4",{children:d().pageInfo.footerText});return r.jsx(r.Fragment,{children:(0,r.jsxs)(n.Z,{header:e,footer:t,children:[r.jsx("h1",{className:"text-2xl text-bold",children:"PENGELUARAN LAIN-LAIN"}),(0,r.jsxs)("div",{className:"flex flex-col",children:[r.jsx(s,{accountId:""}),r.jsx(i.x,{})]})]})})}},439:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});var r=a(2051);a(6269);let s=function(){return r.jsx("div",{className:"border-b border-foreground my-2"})}},1466:(e,t,a)=>{"use strict";a.d(t,{Z:()=>n});var r=a(2051);a(6269);var s=a(439);let n=({header:e,children:t,footer:a})=>(0,r.jsxs)("div",{className:"w-full p-4",children:[r.jsx("header",{className:"page-header",children:e}),r.jsx(s.Z,{}),r.jsx("main",{className:"page-body",children:t}),r.jsx(s.Z,{}),r.jsx("footer",{className:"page-footer",children:a})]})},2386:(e,t,a)=>{"use strict";a.d(t,{x:()=>r});let r=(0,a(5347).createProxy)(String.raw`/Users/gustistudio/Dev/gdps/gdps-c3/src/components/ui/toaster.tsx#Toaster`)},7326:e=>{"use strict";e.exports=global.config={apiUrl:process.env.API_URL,baseUrl:process.env.BASE_URL||"http://localhost:3000",i18n:{welcome:{en:"Welcome",fa:"خوش آمدید",id:"Selamat Datang"}},pageInfo:{headerText:"GDPSApp",footerText:"\xa9 GDPS 2024",loadingText:"Sedang memuat data...",infoNeracaBalance:"Neraca Seimbang",infoNeracaUnbalance:"Neraca Belum Seimbang"}}},3881:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});var r=a(4564);let s=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,r.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};var t=require("../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[379,336,564,183,82],()=>a(3045));module.exports=r})();